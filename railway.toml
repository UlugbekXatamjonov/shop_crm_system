# ============================================================
# RAILWAY TOML — Railway deploy konfiguratsiyasi
# ============================================================

[build]
# Dockerfile dan build qilinadi
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
# Migrate, collectstatic, keyin Gunicorn ishga tushiradi
startCommand = "echo 'PORT='$PORT && gunicorn config.wsgi:application --bind 0.0.0.0:${PORT:-8000} --workers 1 --timeout 60 --access-logfile - --error-logfile - --log-level debug"

# Health check — Railway bu URL ga so'rov yuboradi
healthcheckPath = "/health/"
healthcheckTimeout = 300

# Xato bo'lsa qayta ishga tushiradi
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3
